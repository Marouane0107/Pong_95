{% extends 'base.html' %}
{% load static %}

{% block content %}
<form id="game-result-form">
    {% csrf_token %}
</form>
<input type="hidden" id="game_id" value="{{ game.id }}">
<div id="landingPage" class="game-screen">
    <div id="title1"> classic Ping Pong </div>
    <h1 id="date"> 95 </h1>
    <h1 id="Welcome">Welcome to Ping Pong Game</h1>
    <p>Enjoy the ultimate classic Ping Pong experience!</p>
    <button id="Player_vs_BOT">vs BOT</button>
    <button id="Player_vs_Player">vs Player</button>
    <button id="Multiplayer">Multiplayer</button>
    <button id="QuitMenu">Quit</button>
</div>
<div id="gameContainer" class="game-screen">
    <div id="head">
        <h1 id="title">Pong 95</h1>
        <div id="topFrame">
            <div id="player1">
                <h1 id="Name1">Player_1:</h1>
                <h1 id="Player_1">{{ game.player1_score }}</h1>
            </div>
            <div id="player3">
                <h1 id="Name3">Player_3:</h1>
                <h1 id="Player_3">{{ game.player3_score }}</h1>
            </div>
            <div id="player4">
                <h1 id="Name4">Player_4:</h1>
                <h1 id="Player_4">{{ game.player4_score }}</h1>
            </div>
            <div id="player2">
                <h1 id="Name2">Player_2:</h1>
                <h1 id="Player_2">{{ game.player2_score }}</h1>
            </div>
        </div>
    </div>
    <canvas id="canvas1" width="800" height="500"></canvas>
    <div id="tail">
        <span>(c) maouzal 1337</span>
        <div class="tail-buttons">
            <button id="Menu">Menu</button>
            <button id="Settings">Settings</button>
            <button id="Restart">Restart</button>
            <button id="Quit">Quit</button>
        </div>
    </div>
</div>

<!-- Preload audio files -->
<audio id="paddleHitSound" preload="auto">
    <source src="{% static 'sounds/paddle_hit.wav' %}" type="audio/wav">
</audio>
<audio id="scoreSound" preload="auto">
    <source src="{% static 'sounds/score.wav' %}" type="audio/wav">
</audio>

<!-- Update Settings Menu -->
<div id="settingsMenu" class="game-screen">
    <h2>Settings</h2>
    <div class="settings-content">
        <div class="instructions">
            <h3>Controls:</h3>
            <p>Player 1: W/S keys</p>
            <p>Player 2: ↑/↓ arrows</p>
            <p>Player 3: G/H keys</p>
            <p>Player 4: 7/9 numpad</p>
            <p>ESC: Close settings</p>
        </div>
        <div class="setting-item">
            <label for="soundVolume">Sound Volume:</label>
            <input type="range" id="soundVolume" min="0" max="100" value="50">
        </div>
        <div class="setting-item">
            <label for="soundToggle">Sound Effects:</label>
            <input type="checkbox" id="soundToggle" checked>
        </div>
        <div class="settings-buttons">
            <button id="saveSettings">Save Settings</button>
            <button id="cancelSettings">Cancel</button>
        </div>
    </div>
</div>

<div id="gameOver" class="game-screen">
    <h1 id="winnerText">Game Over</h1>
    <div id="finalScore"></div>
    <button id="playAgain">Play Again</button>
    <button id="returnToMenu">Return to Menu</button>
</div>

<style>
.game-screen {
    display: none;
}

.game-screen.active {
    display: block;
}
</style>

<script src="{% static 'js/game.js' %}"></script>
{% endblock %}
